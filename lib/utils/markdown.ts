/**
 * 마크다운 문법을 제거하고 일반 텍스트로 변환합니다.
 */
export function stripMarkdown(markdown: string): string {
  return markdown
    // 헤더 제거 (# 제거)
    .replace(/^#+\s+/gm, '')
    // 볼드/이탤릭 제거 (**와 __ 제거)
    .replace(/(\*\*|__)(.*?)\1/g, '$2')
    // 이탤릭 제거 (*와 _ 제거)
    .replace(/(\*|_)(.*?)\1/g, '$2')
    // 코드 블록 제거 (```로 시작하는 블록)
    .replace(/```[\s\S]*?```/g, '')
    // 인라인 코드 제거 (`로 감싸진 부분)
    .replace(/`([^`]+)`/g, '$1')
    // 링크 제거 ([text](url) 형식)
    .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '$1')
    // 이미지 제거 (![alt](url) 형식)
    .replace(/!\[([^\]]+)\]\(([^)]+)\)/g, '')
    // 목록 기호 제거 (-, *, + 제거)
    .replace(/^[\s]*[-*+][\s]+/gm, '')
    // 숫자 목록 제거 (1. 2. 등 제거)
    .replace(/^[\s]*\d+\.[\s]+/gm, '')
    // 인용구 제거 (> 제거)
    .replace(/^[\s]*>[\s]*/gm, '')
    // 수평선 제거 (---, ***, ___ 제거)
    .replace(/^[\s]*[-*_]{3,}[\s]*$/gm, '')
    // 여러 줄 바꿈을 하나로 통일
    .replace(/\n{3,}/g, '\n\n')
    // 앞뒤 공백 제거
    .trim();
} 